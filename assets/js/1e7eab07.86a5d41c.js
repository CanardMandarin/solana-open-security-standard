"use strict";(self.webpackChunksolana_open_security_standard=self.webpackChunksolana_open_security_standard||[]).push([[878],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(r),m=o,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return r?n.createElement(f,i(i({ref:t},p),{},{components:r})):n.createElement(f,i({ref:t},p))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2684:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var n=r(7462),o=(r(7294),r(3905));const a={},i="Integer Overflow & Underflow",l={unversionedId:"A03_arithmetic/integer_overflow",id:"A03_arithmetic/integer_overflow",title:"Integer Overflow & Underflow",description:"Description",source:"@site/docs/A03_arithmetic/integer_overflow.md",sourceDirName:"A03_arithmetic",slug:"/A03_arithmetic/integer_overflow",permalink:"/solana-open-security-standard/docs/A03_arithmetic/integer_overflow",draft:!1,editUrl:"https://github.com/CanardMandarin/solana-open-security-standard/tree/main/docs/docs/A03_arithmetic/integer_overflow.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"A03 - Arithmetic",permalink:"/solana-open-security-standard/docs/A03_arithmetic/"},next:{title:"Rounding Errors",permalink:"/solana-open-security-standard/docs/A03_arithmetic/rounding_errors"}},s={},c=[{value:"Description",id:"description",level:2},{value:"How To Prevent",id:"how-to-prevent",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...r}=e;return(0,o.kt)(d,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"integer-overflow--underflow"},"Integer Overflow & Underflow"),(0,o.kt)("h2",{id:"description"},"Description"),(0,o.kt)("p",null,"Integer overflow occurs when the result of an arithmetic operation exceeds the maximum value that can be represented by the data type, causing a wraparound behavior that may lead to unexpected outcomes. Conversely, integer underflow arises when the result falls below the minimum value representable by the data type, similarly causing unintended behavior."),(0,o.kt)("p",null,"The consequences of integer overflow/underflow can be significant, leading to unintended and potentially malicious behavior within Solana programs. In debug mode, Rust includes checks for such occurrences and triggers panics when detected. However, in release mode, these checks are disabled by default, and arithmetic operations wrap around with two's complement, potentially leading to unexpected results."),(0,o.kt)("p",null,"Within the Solana ecosystem, this vulnerability class poses a serious threat, especially in financial calculations where precise values are crucial."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Be aware that when using the Solana toolchain ",(0,o.kt)("inlineCode",{parentName:"p"},"(cargo build-bpf/build-sbf)"),", the compilation process is performed in release mode.")),(0,o.kt)("h2",{id:"how-to-prevent"},"How To Prevent"),(0,o.kt)("p",null,"To mitigate the risk of integer overflow/underflow vulnerabilities, Solana developers must adopt defensive programming practices. The use of checked math and checked casts whenever possible can help avoid unintentional and potentially harmful behavior. By employing ",(0,o.kt)("inlineCode",{parentName:"p"},"checked_add"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"checked_sub"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"checked_mul"),", and other checked operations, developers can ensure that arithmetic operations are carried out safely."),(0,o.kt)("p",null,'Furthermore, developers should avoid unchecked conversions between integer types (e.g., using "',(0,o.kt)("inlineCode",{parentName:"p"},"as"),'" to cast between different integer types) and opt for checked conversions like ',(0,o.kt)("inlineCode",{parentName:"p"},"try_from")," to prevent truncation and unexpected behavior."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Developers can effortlessly mitigate overflow/underflow by adding the following lines to the ",(0,o.kt)("inlineCode",{parentName:"p"},"Cargo.toml")," of a project:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="Cargo.toml"',title:'"Cargo.toml"'},"[profile.release]\noverflow-checks = true\n"))),(0,o.kt)("h1",{id:"references"},"References"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://doc.rust-lang.org/reference/expressions/operator-expr.html#overflow"},"Rust Doc: Operator expressions overflow")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://doc.rust-lang.org/book/ch03-02-data-types.html#integer-overflow"},"Rust Doc: Data type overflow")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://neodyme.io/blog/solana_common_pitfalls/"},"Solana Smart Contracts: Common Pitfalls"))))}u.isMDXComponent=!0}}]);